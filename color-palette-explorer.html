<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Palette Explorer</title>
<style>
        .main-container {
            display: flex;
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .left-panel {
            flex: 1;
            min-width: 400px;
        }
        .right-panel {
            flex: 1;
            min-width: 400px;
        }
        .config-display {
            width: 100%;
            height: 400px;
            font-family: monospace;
            font-size: 12px;
            padding: 10px;
            border: 1px solid #ccc;
            background: #f8f8f8;
        }
    </style>
</head>
<body>
    <h1>Color Palette Explorer</h1>
    
    <div class="main-container">
        <div class="left-panel">
            <div>
                <label for="palette-select">Choose a palette:</label>
                <select id="palette-select">
                    <option value="">Select a palette...</option>
                </select>
            </div>
            
            <div style="margin: 20px 0;">
                <label for="rotation-slider">Rotate Hue:</label>
                <input type="range" id="rotation-slider" min="0" max="360" value="0" step="1">
                <span id="rotation-value">0째</span>
            </div>
            
            <canvas id="color-wheel" width="400" height="400" style="border: 1px solid #ccc;"></canvas>
            
            <div id="palette-colors" style="margin-top: 20px;"></div>
        </div>
        
        <div class="right-panel">
            <div>
                <label for="format-select">Config Format:</label>
                <select id="format-select">
                    <option value="neovim">Neovim Colorscheme</option>
                    <option value="ghostty">Ghostty Config</option>
                </select>
                <button id="copy-config" style="margin-left: 10px;">Copy to Clipboard</button>
            </div>
            
            <div style="margin-top: 10px;">
                <textarea id="config-display" class="config-display" readonly placeholder="Select a palette to see the generated configuration..."></textarea>
            </div>
        </div>
    </div>

    <script>
        const palettes = {
            solarized: {
                name: "Solarized",
                colors: ["#002b36", "#073642", "#586e75", "#657b83", "#839496", "#93a1a1", "#eee8d5", "#fdf6e3", "#b58900", "#cb4b16", "#dc322f", "#d33682", "#6c71c4", "#268bd2", "#2aa198", "#859900"]
            },
            nord: {
                name: "Nord",
                colors: ["#2e3440", "#3b4252", "#434c5e", "#4c566a", "#d8dee9", "#e5e9f0", "#eceff4", "#8fbcbb", "#88c0d0", "#81a1c1", "#5e81ac", "#bf616a", "#d08770", "#ebcb8b", "#a3be8c", "#b48ead"]
            },
            catppuccin: {
                name: "Catppuccin Mocha",
                colors: ["#1e1e2e", "#181825", "#313244", "#45475a", "#585b70", "#6c7086", "#7f849c", "#9399b2", "#a6adc8", "#bac2de", "#cdd6f4", "#f38ba8", "#fab387", "#f9e2af", "#a6e3a1", "#94e2d5", "#89b4fa", "#cba6f7"]
            },
            dracula: {
                name: "Dracula",
                colors: ["#282a36", "#44475a", "#f8f8f2", "#6272a4", "#8be9fd", "#50fa7b", "#ffb86c", "#ff79c6", "#bd93f9", "#ff5555", "#f1fa8c"]
            },
            gruvbox: {
                name: "Gruvbox",
                colors: ["#282828", "#cc241d", "#98971a", "#d79921", "#458588", "#b16286", "#689d6a", "#a89984", "#928374", "#fb4934", "#b8bb26", "#fabd2f", "#83a598", "#d3869b", "#8ec07c", "#ebdbb2"]
            }
        };

        let currentPalette = null;
        let rotationAngle = 0;
        
        const canvas = document.getElementById('color-wheel');
        const ctx = canvas.getContext('2d');
        const paletteSelect = document.getElementById('palette-select');
        const rotationSlider = document.getElementById('rotation-slider');
        const rotationValue = document.getElementById('rotation-value');
        const paletteColorsDiv = document.getElementById('palette-colors');
        const configDisplay = document.getElementById('config-display');
        const formatSelect = document.getElementById('format-select');
        
        function hexToHsl(hex) {
            const r = parseInt(hex.slice(1, 3), 16) / 255;
            const g = parseInt(hex.slice(3, 5), 16) / 255;
            const b = parseInt(hex.slice(5, 7), 16) / 255;
            
            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;
            
            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }
            
            return [h * 360, s * 100, l * 100];
        }
        
        function hslToHex(h, s, l) {
            l /= 100;
            const a = s * Math.min(l, 1 - l) / 100;
            const f = n => {
                const k = (n + h / 30) % 12;
                const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
                return Math.round(255 * color).toString(16).padStart(2, '0');
            };
            return `#${f(0)}${f(8)}${f(4)}`;
        }
        
        function drawColorWheel() {
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 180;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            for (let angle = 0; angle < 360; angle += 1) {
                for (let r = 0; r < radius; r += 1) {
                    const hue = angle;
                    const saturation = (r / radius) * 100;
                    const lightness = 50;
                    
                    const x = centerX + r * Math.cos((angle * Math.PI) / 180);
                    const y = centerY + r * Math.sin((angle * Math.PI) / 180);
                    
                    ctx.fillStyle = `hsl(${hue}, ${saturation}%, ${lightness}%)`;
                    ctx.fillRect(x, y, 1, 1);
                }
            }
            
            if (currentPalette) {
                drawPaletteOnWheel();
            }
        }
        
        function drawPaletteOnWheel() {
            if (!currentPalette) return;
            
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 180;
            
            currentPalette.colors.forEach((color, index) => {
                const [h, s, l] = hexToHsl(color);
                const adjustedHue = (h + rotationAngle) % 360;
                const adjustedColor = hslToHex(adjustedHue, s, l);
                
                const angle = (adjustedHue * Math.PI) / 180;
                const r = (s / 100) * radius;
                
                const x = centerX + r * Math.cos(angle);
                const y = centerY + r * Math.sin(angle);
                
                ctx.beginPath();
                ctx.arc(x, y, 8, 0, 2 * Math.PI);
                ctx.fillStyle = adjustedColor;
                ctx.fill();
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                ctx.fillStyle = '#fff';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText((index + 1).toString(), x, y + 4);
            });
        }
        
        function getCurrentColors() {
            if (!currentPalette) return [];
            
            return currentPalette.colors.map(color => {
                const [h, s, l] = hexToHsl(color);
                const adjustedHue = (h + rotationAngle) % 360;
                return hslToHex(adjustedHue, s, l);
            });
        }
        
        function generateNeovimColorscheme() {
            const colors = getCurrentColors();
            const schemeName = (currentPalette.name + '_rotated_' + rotationAngle).toLowerCase().replace(/[^a-z0-9_]/g, '_');
            
            let config = `-- Neovim colorscheme generated from ${currentPalette.name} (rotated ${rotationAngle}째)\n`;
            config += `vim.cmd('hi clear')\n`;
            config += `vim.cmd('syntax reset')\n`;
            config += `vim.g.colors_name = '${schemeName}'\n\n`;
            
            const colorMap = {
                bg: colors[0] || '#000000',
                bg_alt: colors[1] || '#111111',
                fg: colors[colors.length - 1] || '#ffffff',
                fg_alt: colors[colors.length - 2] || '#cccccc',
                red: colors[Math.floor(colors.length * 0.2)] || '#ff0000',
                green: colors[Math.floor(colors.length * 0.4)] || '#00ff00',
                yellow: colors[Math.floor(colors.length * 0.5)] || '#ffff00',
                blue: colors[Math.floor(colors.length * 0.6)] || '#0000ff',
                magenta: colors[Math.floor(colors.length * 0.7)] || '#ff00ff',
                cyan: colors[Math.floor(colors.length * 0.8)] || '#00ffff'
            };
            
            config += `local colors = {\n`;
            Object.entries(colorMap).forEach(([name, color]) => {
                config += `  ${name} = '${color}',\n`;
            });
            config += `}\n\n`;
            
            const highlights = [
                ['Normal', 'fg = colors.fg, bg = colors.bg'],
                ['Comment', 'fg = colors.fg_alt'],
                ['Keyword', 'fg = colors.blue'],
                ['String', 'fg = colors.green'],
                ['Number', 'fg = colors.yellow'],
                ['Function', 'fg = colors.cyan'],
                ['Type', 'fg = colors.magenta'],
                ['Error', 'fg = colors.red'],
                ['Warning', 'fg = colors.yellow'],
                ['LineNr', 'fg = colors.fg_alt'],
                ['CursorLine', 'bg = colors.bg_alt'],
                ['Visual', 'bg = colors.bg_alt']
            ];
            
            highlights.forEach(([group, attrs]) => {
                const processedAttrs = attrs.replace(/colors\.(\w+)/g, (_, colorName) => `"${colorMap[colorName]}"`);
                config += `vim.api.nvim_set_hl(0, '${group}', { ${processedAttrs} })\n`;
            });
            
            return config;
        }
        
        function generateGhosttyConfig() {
            const colors = getCurrentColors();
            
            let config = `# Ghostty config generated from ${currentPalette.name} (rotated ${rotationAngle}째)\n`;
            config += `# Add this to your ghostty config file\n\n`;
            
            config += `background = ${colors[0] || '#000000'}\n`;
            config += `foreground = ${colors[colors.length - 1] || '#ffffff'}\n\n`;
            
            const paletteEntries = [];
            for (let i = 0; i < 16 && i < colors.length; i++) {
                paletteEntries.push(`palette = ${i}=${colors[i]}`);
            }
            
            paletteEntries.forEach(entry => {
                config += entry + '\n';
            });
            
            return config;
        }
        
        function updateConfigDisplay() {
            const configDisplay = document.getElementById('config-display');
            const formatSelect = document.getElementById('format-select');
            
            if (!currentPalette) {
                configDisplay.value = '';
                configDisplay.placeholder = 'Select a palette to see the generated configuration...';
                return;
            }
            
            const format = formatSelect.value;
            if (format === 'neovim') {
                configDisplay.value = generateNeovimColorscheme();
            } else if (format === 'ghostty') {
                configDisplay.value = generateGhosttyConfig();
            }
            configDisplay.placeholder = '';
        }
        
        function updatePaletteDisplay() {
            if (!currentPalette) {
                paletteColorsDiv.innerHTML = '';
                updateConfigDisplay();
                return;
            }
            
            const colorsHtml = currentPalette.colors.map((color, index) => {
                const [h, s, l] = hexToHsl(color);
                const adjustedHue = (h + rotationAngle) % 360;
                const adjustedColor = hslToHex(adjustedHue, s, l);
                
                return `
                    <div style="display: inline-block; margin: 5px; text-align: center;">
                        <div style="width: 50px; height: 50px; background-color: ${adjustedColor}; border: 1px solid #000; margin-bottom: 5px;"></div>
                        <div style="font-size: 12px;">${adjustedColor}</div>
                    </div>
                `;
            }).join('');
            
            paletteColorsDiv.innerHTML = `<h3>Current Palette: ${currentPalette.name}</h3>${colorsHtml}`;
            updateConfigDisplay();
        }
        
        Object.keys(palettes).forEach(key => {
            const option = document.createElement('option');
            option.value = key;
            option.textContent = palettes[key].name;
            paletteSelect.appendChild(option);
        });
        
        paletteSelect.addEventListener('change', function() {
            if (this.value) {
                currentPalette = palettes[this.value];
                drawColorWheel();
                updatePaletteDisplay();
            } else {
                currentPalette = null;
                drawColorWheel();
                updatePaletteDisplay();
            }
        });
        
        rotationSlider.addEventListener('input', function() {
            rotationAngle = parseInt(this.value);
            rotationValue.textContent = `${rotationAngle}째`;
            drawColorWheel();
            updatePaletteDisplay();
        });
        
        document.getElementById('format-select').addEventListener('change', function() {
            updateConfigDisplay();
        });
        
        document.getElementById('copy-config').addEventListener('click', async function() {
            const text = document.getElementById('config-display').value;
            if (!text) {
                alert('No configuration to copy. Please select a palette first.');
                return;
            }
            
            try {
                await navigator.clipboard.writeText(text);
                this.textContent = 'Copied!';
                setTimeout(() => {
                    this.textContent = 'Copy to Clipboard';
                }, 2000);
            } catch (err) {
                console.error('Failed to copy: ', err);
                this.textContent = 'Copy failed';
                setTimeout(() => {
                    this.textContent = 'Copy to Clipboard';
                }, 2000);
            }
        });
        
        drawColorWheel();
    </script>
</body>
</html>
